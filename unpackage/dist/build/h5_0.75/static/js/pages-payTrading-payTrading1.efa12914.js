(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payTrading-payTrading1"],{"0d36":function(e,a,t){a=e.exports=t("2350")(!1),a.push([e.i,"uni-scroll-view[data-v-559bae86] ::-webkit-scrollbar{width:0;height:0;color:rgba(0,0,0,0)}.pay_trading[data-v-559bae86],uni-page-body[data-v-559bae86]{position:relative;width:100%;height:100%;background:#fff;overflow:hidden\n/* 信用卡信息 */\n/* 手续费用 */\n/* 到账储蓄卡 */\n/* 验证码输入 */\n/* 落地商户 */\n/* 确定按钮 */}.pay_trading .trading_msg[data-v-559bae86],uni-page-body .trading_msg[data-v-559bae86]{width:100%;margin-top:%?55?%}.pay_trading .trading_msg .trading_bank[data-v-559bae86],uni-page-body .trading_msg .trading_bank[data-v-559bae86]{font-size:%?28?%;text-align:center}.pay_trading .trading_msg .trading_num[data-v-559bae86],uni-page-body .trading_msg .trading_num[data-v-559bae86]{font-size:%?30?%;text-align:center;margin-top:%?25?%;margin-bottom:%?40?%}.pay_trading .trading_msg .trading_money[data-v-559bae86],uni-page-body .trading_msg .trading_money[data-v-559bae86]{text-align:center;font-size:%?60?%}.pay_trading .service_charge[data-v-559bae86],uni-page-body .service_charge[data-v-559bae86]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:0 %?70?%;color:#bbbaba;font-size:%?24?%;margin-top:%?25?%}.pay_trading .depsite_card[data-v-559bae86],uni-page-body .depsite_card[data-v-559bae86]{text-align:center;font-size:%?26?%;margin-top:%?105?%}.pay_trading .code_input_main[data-v-559bae86],uni-page-body .code_input_main[data-v-559bae86]{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0 %?70?%;margin-top:%?50?%;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}.pay_trading .code_input_main .code_input_item[data-v-559bae86],uni-page-body .code_input_main .code_input_item[data-v-559bae86]{width:%?752?%;height:%?93?%;line-height:%?93?%;opacity:.8;border-bottom:solid #d6d6db %?4?%;font-size:%?26?%;color:#000}.pay_trading .code_input_main .code_input_input[data-v-559bae86],uni-page-body .code_input_main .code_input_input[data-v-559bae86]{position:absolute;width:100%;height:%?93?%;padding:0 %?70?%;color:rgba(0,0,0,0);left:0}.pay_trading .choose_card_wrapper[data-v-559bae86],uni-page-body .choose_card_wrapper[data-v-559bae86]{background-color:#fff}.pay_trading .choose_sms_wrapper[data-v-559bae86],uni-page-body .choose_sms_wrapper[data-v-559bae86]{width:%?550?%;height:%?350?%;border-radius:%?10?%;background-color:#fff;overflow:hidden}.pay_trading .choose_sms_wrapper .sms_title[data-v-559bae86],uni-page-body .choose_sms_wrapper .sms_title[data-v-559bae86]{text-align:center;font-size:%?36?%;margin:%?40?% 0}.pay_trading .choose_sms_wrapper .validata_inp[data-v-559bae86],uni-page-body .choose_sms_wrapper .validata_inp[data-v-559bae86]{margin-left:%?40?%;padding-left:%?20?%;width:%?470?%;height:%?80?%;border:1px solid #ccc;border-radius:%?4?%}.pay_trading .choose_sms_wrapper .validata_sure[data-v-559bae86],uni-page-body .choose_sms_wrapper .validata_sure[data-v-559bae86]{margin-top:%?60?%;letter-spacing:%?8?%;text-align:center;font-size:%?40?%;line-height:%?90?%;color:#fff;background:#617bf8}.pay_trading .choose_card_title[data-v-559bae86],uni-page-body .choose_card_title[data-v-559bae86]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:%?70?%;font-size:%?30?%;color:#589dfd;border-bottom:%?2?% solid #d9d9d9}.pay_trading .choose_card_content[data-v-559bae86],uni-page-body .choose_card_content[data-v-559bae86]{height:%?850?%}.pay_trading .choose_card_content .choose_item[data-v-559bae86],uni-page-body .choose_card_content .choose_item[data-v-559bae86]{text-align:left;line-height:%?70?%;padding:0 %?25?%;font-size:%?26?%;border-bottom:%?2?% solid #d6d6db}.pay_trading .sure_btn[data-v-559bae86],uni-page-body .sure_btn[data-v-559bae86]{width:%?672?%;margin-top:%?100?%;margin-left:%?40?%;border-radius:%?60?%}.pay_trading .wzj[data-v-559bae86],uni-page-body .wzj[data-v-559bae86]{background-color:#fff}body.?%PAGE?%[data-v-559bae86]{background:#fff;background-color:#fff;background-color:#fff;background:#617bf8;background-color:#fff}",""])},"47ec":function(e,a,t){"use strict";t.r(a);var i=t("efc8"),n=t.n(i);for(var o in i)"default"!==o&&function(e){t.d(a,e,function(){return i[e]})}(o);a["default"]=n.a},d307:function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"pay_trading"},[t("v-uni-view",{staticClass:"trading_msg"},[t("v-uni-view",{staticClass:"trading_bank"},[e._v(e._s(e.paycardNoName)+"(信用卡)")]),t("v-uni-view",{staticClass:"trading_num"},[e._v(e._s(e.paycardNo.replace(/^(\d{4})\d+(\d{4})$/,"$1****$2")))]),t("v-uni-view",{staticClass:"trading_money"},[e._v("¥"+e._s(e.amount))])],1),t("v-uni-view",{staticClass:"service_charge"},[t("v-uni-view",[e._v("手续费  "+e._s(e.serviceCharge.toString().match(/^\d+(?:\.\d{0,2})?/)[0])+"元")]),t("v-uni-view",[e._v("实际到账  "+e._s(e.arrivalAccount.toString().match(/^\d+(?:\.\d{0,2})?/)[0])+"元")])],1),t("v-uni-view",{staticClass:"code_input_main"},[t("v-uni-view",{staticClass:"code_input_item"},[e._v(e._s(e.code))]),t("v-uni-input",{staticClass:"code_input_input",attrs:{disabled:"",placeholder:"请输入落地商户","placeholder-style":"color:#589DFD;"},on:{click:function(a){a=e.$handleEvent(a),e.showMulLinkageTwoPicker(a)}},model:{value:e.code,callback:function(a){e.code=a},expression:"code"}})],1),t("v-uni-view",{staticClass:"depsite_card"},[e._v("到账储蓄银行：  "+e._s(e.rePayCardNoName)+"("+e._s(e.rePayCardNo.substr(e.rePayCardNo.length-4))+")")]),t("v-uni-button",{staticClass:"sure_btn",attrs:{type:"primary"},on:{click:function(a){a=e.$handleEvent(a),e.getPayCommit(a)}}},[e._v("确认提交")]),t("mpvue-picker",{ref:"mpvuePicker",attrs:{themeColor:e.themeColor,mode:e.mode,deepLength:e.deepLength,pickerValueDefault:e.pickerValueDefault,pickerValueArray:e.pickerValueArray},on:{onConfirm:function(a){a=e.$handleEvent(a),e.onConfirm(a)},onCancel:function(a){a=e.$handleEvent(a),e.onCancel(a)}}}),t("uni-popup",{attrs:{show:"bottom"===e.type,position:"bottom",mode:"fixed"},on:{hidePopup:function(a){a=e.$handleEvent(a),e.togglePopup("")}}},[t("v-uni-view",{staticClass:"choose_card_wrapper"},[t("v-uni-view",{staticClass:"choose_card_title"},[e._v("选择商户")]),t("v-uni-scroll-view",{staticClass:"choose_card_content",attrs:{"scroll-y":"true"}},e._l(e.merList,function(a){return t("v-uni-view",{key:a.id,staticClass:"choose_item",on:{click:function(t){t=e.$handleEvent(t),e.chooseMer(a.merchant_name,a.id)}}},[e._v(e._s(a.merchant_name))])}),1)],1)],1),t("uni-popup",{attrs:{show:"smsValidation"===e.type,position:"middle",mode:"fixed"},on:{hidePopup:function(a){a=e.$handleEvent(a),e.togglePopup("")}}},[t("v-uni-view",{staticClass:"choose_sms_wrapper"},[t("v-uni-view",{staticClass:"sms_title"},[e._v("请填写短信验证码")]),t("v-uni-input",{staticClass:"validata_inp",attrs:{type:"number",maxlength:"6",placeholder:"请输入短信验证码 "},model:{value:e.validateCode,callback:function(a){e.validateCode=a},expression:"validateCode"}}),t("v-uni-view",{staticClass:"validata_sure",on:{click:function(a){a=e.$handleEvent(a),e.getPaySms(a)}}},[e._v("确定")])],1)],1)],1)},n=[];t.d(a,"a",function(){return i}),t.d(a,"b",function(){return n})},d482:function(e,a,t){"use strict";var i=t("f153"),n=t.n(i);n.a},e117:function(e,a,t){"use strict";t.r(a);var i=t("d307"),n=t("47ec");for(var o in n)"default"!==o&&function(e){t.d(a,e,function(){return n[e]})}(o);t("d482");var r=t("2877"),d=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"559bae86",null);a["default"]=d.exports},efc8:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=r(t("a34a")),n=r(t("792f")),o=r(t("9c26"));function r(e){return e&&e.__esModule?e:{default:e}}function d(e,a,t,i,n,o,r){try{var d=e[o](r),s=d.value}catch(c){return void t(c)}d.done?a(s):Promise.resolve(s).then(i,n)}function s(e){return function(){var a=this,t=arguments;return new Promise(function(i,n){var o=e.apply(a,t);function r(e){d(o,i,n,r,s,"next",e)}function s(e){d(o,i,n,r,s,"throw",e)}r(void 0)})}}var c={components:{mpvuePicker:n.default,uniPopup:o.default},data:function(){return{type:"",mulLinkageTwoPicker:[],cityPickerValueDefault:[0,0,1],themeColor:"#007AFF",pickerText:"",mode:"",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],code:"",dataMap:{},proId:"",userPhoneInfo:{},validateCode:"",ticketCode:"",amount:"",paycardNo:"",paycardNoName:"",rePayCardNo:"",rePayCardNoName:"",paymentId:"",serviceCharge:0,arrivalAccount:0,province:"",city:"",merList:[],merchantUid:""}},methods:{getPaySms:function(){var e=s(i.default.mark(function e(){var a;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.validateCode.trim()){e.next=3;break}return uni.showToast({title:"短信验证码不能为空",icon:"none",duration:2e3}),e.abrupt("return");case 3:return uni.showLoading({title:"加载中"}),e.next=6,this.$api.paySms({proId:this.proId,validateCode:this.validateCode,ticketCode:this.ticketCode,paymentId:this.paymentId},this.userPhoneInfo);case 6:a=e.sent,"SUCCESS"==a.data.respCode&&a.data.dataMap?(uni.hideLoading(),uni.redirectTo({url:"/pages/paySucc/paySucc"})):(uni.hideLoading(),uni.showToast({title:a.data.respMsg,icon:"none",duration:4e3}));case 8:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}(),getMerchantCity:function(){var e=s(i.default.mark(function e(){var a;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return uni.showLoading({title:"加载中"}),e.next=3,this.$api.merchantCity({proId:this.proId},this.userPhoneInfo);case 3:a=e.sent,"SUCCESS"==a.data.respCode&&a.data.dataMap?(console.log(a),uni.hideLoading(),this.mulLinkageTwoPicker=a.data.dataMap.provinceList):(uni.hideLoading(),uni.showToast({title:a.data.respMsg,icon:"none",duration:4e3}));case 5:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}(),getLandingMerchant:function(){var e=s(i.default.mark(function e(){var a;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return uni.showLoading({title:"加载中"}),e.next=3,this.$api.landingMerchant({proId:this.proId,province:this.province,city:this.city},this.userPhoneInfo);case 3:a=e.sent,"SUCCESS"==a.data.respCode&&a.data.dataMap&&(uni.hideLoading(),console.log(a),this.merList=a.data.dataMap.merList,this.togglePopup("bottom"));case 5:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}(),getPayCommit:function(){var e=s(i.default.mark(function e(){var a;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.merchantUid){e.next=3;break}return uni.showToast({title:"请选择落地商户!",icon:"none"}),e.abrupt("return");case 3:return uni.showLoading({title:"加载中"}),e.next=6,this.$api.payCommit({proId:this.proId,paymentId:this.paymentId,merchantUid:this.merchantUid},this.userPhoneInfo);case 6:a=e.sent,"SUCCESS"==a.data.respCode&&a.data.dataMap?(console.log(a),uni.hideLoading(),"1"==a.data.dataMap.isSms?(this.togglePopup("smsValidation"),this.ticketCode=a.data.dataMap.ticketCode):"0"==a.data.dataMap.isSms?uni.redirectTo({url:"/pages/paySucc/paySucc"}):uni.showToast({title:a.data.respMsg,icon:"none",duration:4e3})):(uni.hideLoading(),uni.showToast({title:a.data.respMsg,icon:"none",duration:4e3}));case 8:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}(),togglePopup:function(e){this.type=e},onCancel:function(e){console.log(e)},showMulLinkageTwoPicker:function(){this.pickerValueArray=this.mulLinkageTwoPicker,this.mode="multiLinkageSelector",this.deepLength=2,this.pickerValueDefault=[0,0],uni.hideKeyboard(),this.$refs.mpvuePicker.show()},onConfirm:function(e){this.pickerText=e.province,this.province=this.pickerText.split("-")[0],this.city=this.pickerText.split("-")[1],this.getLandingMerchant()},chooseMer:function(e,a){this.code=e,this.merchantUid=a,this.togglePopup("")}},onLoad:function(e){this.userPhoneInfo=uni.getStorageSync("userPhoneInfo"),this.dataMap=JSON.parse(e.dataMap),console.log(this.dataMap),this.amount=this.dataMap.amount,this.paycardNo=this.dataMap.paycardNo,this.paycardNoName=this.dataMap.paycardNoName,this.rePayCardNo=this.dataMap.rePayCardNo,this.rePayCardNoName=this.dataMap.rePayCardNoName,this.serviceCharge=this.dataMap.serviceCharge,this.arrivalAccount=this.dataMap.arrivalAccount,this.paymentId=this.dataMap.paymentId,this.proId=this.dataMap.proId,this.getMerchantCity()},onBackPress:function(){if(this.$refs.mpvuePicker.showPicker)return this.$refs.mpvuePicker.pickerCancel(),!0},onUnload:function(){this.$refs.mpvuePicker.showPicker&&this.$refs.mpvuePicker.pickerCancel()}};a.default=c},f153:function(e,a,t){var i=t("0d36");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=t("4f06").default;n("799939ea",i,!0,{sourceMap:!1,shadowMode:!1})}}]);